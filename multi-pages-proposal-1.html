<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Question for You üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    overflow: hidden;
    background: black;
    font-family: 'Montserrat', sans-serif;
}

canvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

/* UI */
#ui-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    text-align: center;
    color: white;
    width: 90%;
    max-width: 600px;
}

h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 4rem;
    text-shadow: 0 0 25px hotpink;
    animation: fadeIn 1.5s forwards;
}

p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    animation: fadeIn 2s forwards;
}

.btn-group {
    display: flex;
    justify-content: center;
    gap: 20px;
}

button {
    padding: 14px 35px;
    border-radius: 40px;
    border: none;
    font-size: 1.1rem;
    cursor: pointer;
    font-weight: 600;
    letter-spacing: 1px;
}

#btn-next {
    background: linear-gradient(45deg, #ff69b4, #ff1493);
    color: white;
}

#btn-yes {
    background: linear-gradient(45deg, #ff6b6b, #ff8787);
    color: white;
}

#btn-no {
    background: rgba(255,255,255,0.1);
    color: #aaa;
    border: 1px solid rgba(255,255,255,0.3);
    position: relative;
}

#success-msg {
    display: none;
    font-family: 'Great Vibes', cursive;
    font-size: 5rem;
    color: gold;
    text-shadow: 0 0 40px orange;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<div id="ui-container">
    <h1 id="main-text">Hey You...</h1>
    <p id="sub-text">I want to tell you something special.</p>

    <div class="btn-group" id="next-group">
        <button id="btn-next">Next üí´</button>
    </div>

    <div class="btn-group" id="final-group" style="display:none;">
        <button id="btn-yes">Yes ‚ù§Ô∏è</button>
        <button id="btn-no">No üôà</button>
    </div>

    <div id="success-msg">I Love You! ‚ù§Ô∏è</div>
</div>

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
  }
}
</script>

<script type="module">
import * as THREE from 'three';

/* ------------------ 3D BACKGROUND ------------------ */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 100);
camera.position.z = 25;

const renderer = new THREE.WebGLRenderer({alpha:true, antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BufferGeometry();
const count = 5000;
const pos = new Float32Array(count*3);
const rnd = new Float32Array(count*3);

for(let i=0;i<count;i++){
    const r = 8 + Math.random()*4;
    const t = Math.random()*Math.PI*2;
    const p = Math.acos(Math.random()*2-1);

    pos[i*3] = r*Math.sin(p)*Math.cos(t);
    pos[i*3+1] = r*Math.sin(p)*Math.sin(t);
    pos[i*3+2] = r*Math.cos(p);

    rnd[i*3] = Math.random();
    rnd[i*3+1] = Math.random();
    rnd[i*3+2] = Math.random();
}

geometry.setAttribute('position', new THREE.BufferAttribute(pos,3));
geometry.setAttribute('aRandom', new THREE.BufferAttribute(rnd,3));

const material = new THREE.ShaderMaterial({
    uniforms:{
        uTime:{value:0},
        uExpansion:{value:0},
        uColor:{value:new THREE.Color(0xff0055)}
    },
    vertexShader:`
        uniform float uTime;
        uniform float uExpansion;
        attribute vec3 aRandom;
        void main(){
            vec3 p = position + normalize(position)*uExpansion*aRandom.y*30.0;
            float a = uTime*0.1*aRandom.z;
            mat2 r = mat2(cos(a),-sin(a),sin(a),cos(a));
            p.xy = r*p.xy;
            vec4 mv = modelViewMatrix*vec4(p,1.0);
            gl_PointSize = 40.0*(1.0/-mv.z);
            gl_Position = projectionMatrix*mv;
        }
    `,
    fragmentShader:`
        uniform vec3 uColor;
        void main(){
            vec2 uv = gl_PointCoord*2.0-1.0;
            if(length(uv)>1.0) discard;
            gl_FragColor = vec4(uColor,1.0);
        }
    `,
    transparent:true,
    blending:THREE.AdditiveBlending
});

const points = new THREE.Points(geometry, material);
scene.add(points);

function animate(){
    requestAnimationFrame(animate);
    material.uniforms.uTime.value += 0.01;
    points.rotation.y += 0.002;
    renderer.render(scene,camera);
}
animate();

/* ------------------ UI LOGIC ------------------ */
const pages = [
    ["Hey You...", "I want to tell you something special."],
    ["You Know What?", "You make my world brighter every day."],
    ["Every Moment", "Feels magical when I'm with you."],
    ["So...", "Will you be mine forever? üíñ"]
];

let page = 0;
const mainText = document.getElementById("main-text");
const subText = document.getElementById("sub-text");
const btnNext = document.getElementById("btn-next");
const nextGroup = document.getElementById("next-group");
const finalGroup = document.getElementById("final-group");
const success = document.getElementById("success-msg");

btnNext.onclick = () => {
    page++;
    if(page < pages.length){
        mainText.textContent = pages[page][0];
        subText.textContent = pages[page][1];
    }
    if(page === pages.length-1){
        nextGroup.style.display="none";
        finalGroup.style.display="flex";
    }
};

const btnNo = document.getElementById("btn-no");
btnNo.onmouseover = btnNo.onclick = () => {
    btnNo.style.transform = `translate(${(Math.random()-0.5)*300}px, ${(Math.random()-0.5)*300}px)`;
};

document.getElementById("btn-yes").onclick = () => {
    material.uniforms.uColor.value.setHex(0xffd700);
    let e = 0;
    const boom = setInterval(()=>{
        e+=0.05;
        material.uniforms.uExpansion.value=e;
        if(e>2) clearInterval(boom);
    },16);

    mainText.style.display="none";
    subText.style.display="none";
    finalGroup.style.display="none";
    success.style.display="block";
};

window.onresize = ()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
};
</script>

</body>
</html>
